(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n.p+"static/media/zutan.e200f990.svg"},168:function(e,t,n){e.exports=n(361)},181:function(e,t,n){},361:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(21),c=n.n(r),o=n(26),u=(n(181),n(166)),l=n(20),s=n(22),m=n(24),h=n(23),p=n(25),d=n(10),f=n(363),b=n(364),g=n(142),k=n.n(g),j=n(46),v=n(66),O=n(11),y=n(86);n(221);function C(){var e=Object(d.a)(["\n  margin-top: 20px;\n"]);return C=function(){return e},e}var E=O.a.div(C()),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).firebaseUIConfig={callbacks:{signInSuccessWithAuthResult:function(e,t){return console.log("signInSuccessWithAuthResult:",e),n.firebaseUI.reset(),!1},uiShown:function(){n.setState({firebaseUIShown:!0})}},credentialHelper:y.auth.CredentialHelper.NONE,signInOptions:[o.auth.EmailAuthProvider.PROVIDER_ID]},n.state={firebaseUIShown:!1},n.firebaseUI=new y.auth.AuthUI(o.auth()),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.firebaseUIShown;return i.a.createElement(E,null,i.a.createElement("div",{className:"firebaseui-auth-container"}),!e&&i.a.createElement("div",null,"Loading..."))}},{key:"componentDidMount",value:function(){this.startFirebaseUI()}},{key:"componentWillUnmount",value:function(){this.stopFirebaseUI()}},{key:"startFirebaseUI",value:function(){this.firebaseUI.start(".firebaseui-auth-container",this.firebaseUIConfig)}},{key:"stopFirebaseUI",value:function(){this.firebaseUI.reset()}}]),t}(a.Component),w=n(49),S=n.n(w),U=n(89),I=n(12),R=n(90),M=n.n(R),L=n(154),_=n.n(L),z=n(153),Z=n.n(z),T=n(155),A=n.n(T),D=n(67),H=n.n(D),F=n(147),q=n.n(F),W=n(146),P=n.n(W),B=n(48),N=n.n(B),J=n(149),V=n.n(J),G=n(148),K=n.n(G);function X(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return X=function(){return e},e}var Y=Object(O.a)(P.a)(X()),Q=function(e){return i.a.createElement(q.a,{position:"static"},i.a.createElement(Y,null,i.a.createElement(N.a,{color:"inherit",onClick:e.onClickMyZutan},i.a.createElement(K.a,null)),i.a.createElement(N.a,{color:"inherit",onClick:e.onClickHome},i.a.createElement(V.a,null))))},$=n(150),ee=n.n($),te=n(65),ne=n.n(te),ae=n(151),ie=n.n(ae),re=n(41),ce=n.n(re),oe=n(63),ue=n.n(oe),le=n(64),se=n.n(le);function me(){var e=Object(d.a)(["\n  object-fit: contain;\n  display: block;\n  margin: auto;\n"]);return me=function(){return e},e}function he(){var e=Object(d.a)(["\n  margin: 10px 0;\n"]);return he=function(){return e},e}var pe=O.a.div(he()),de=O.a.img(me()),fe=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(pe,null,i.a.createElement(ce.a,{container:!0,alignItems:"center",spacing:8},this.props.imageURLs.map(function(t,n){return i.a.createElement(ce.a,{key:n,item:!0,xs:!0},i.a.createElement(ue.a,{raised:!0,onClick:function(){return e.props.onImageClicked(n)}},i.a.createElement(se.a,null,i.a.createElement(de,{src:t}))))})))}}]),t}(a.Component);function be(){var e=Object(d.a)(["\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n"]);return be=function(){return e},e}function ge(){var e=Object(d.a)(["\n  margin: 10px;\n"]);return ge=function(){return e},e}var ke=O.a.div(ge()),je=O.a.div(be()),ve=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.props.width){case"xs":e=2;break;case"sm":e=4;break;default:e=5}var n=[];return this.props.imageURLs.forEach(function(t,a){a%e===0&&n.push([]),n[n.length-1].push(t)}),i.a.createElement(ke,null,n.map(function(n,a){return i.a.createElement(fe,{key:a,imageURLs:n,onImageClicked:function(n){t.props.onImageClicked(a*e+n)}})}),0<this.props.imageURLs.length&&i.a.createElement(je,null,i.a.createElement(ee.a,{variant:"extended",onClick:this.props.onMoreResultsClicked},i.a.createElement(ie.a,null),"More Results")))}}]),t}(a.Component),Oe=ne()()(ve),ye=n(152),Ce=n.n(ye),Ee=[{thumb:"/mockdata/apple0_thumb.jpg",full:"/mockdata/apple0_full.jpg"},{thumb:"/mockdata/apple1_thumb.png",full:"/mockdata/apple1_full.png"},{thumb:"/mockdata/apple2_thumb.png",full:"/mockdata/apple2_full.jpg"},{thumb:"/mockdata/apple3_thumb.jpg",full:"/mockdata/apple3_full.jpg"},{thumb:"/mockdata/apple4_thumb.png",full:"/mockdata/apple4_full.png"},{thumb:"/mockdata/apple5_thumb.png",full:"/mockdata/apple5_full.jpg"},{thumb:"/mockdata/apple6_thumb.png",full:"/mockdata/apple6_full.png"},{thumb:"/mockdata/apple7_thumb.png",full:"/mockdata/apple7_full.png"},{thumb:"/mockdata/apple8_thumb.png",full:"/mockdata/apple8_full.jpg"},{thumb:"/mockdata/apple9_thumb.png",full:"/mockdata/apple9_full.png"}].map(function(e){return{thumb:"/zutan"+e.thumb,full:"/zutan"+e.full}}),xe=[{word:"rice",imageURL:"/mockdata/rice0_full.jpg"},{word:"run",imageURL:"/mockdata/run0_full.png"},{word:"doggy",imageURL:"/mockdata/doggy0_full.jpg"},{word:"doggy",imageURL:"/mockdata/doggy1_full.jpg"}].map(function(e){return{word:e.word,imageURL:"/zutan"+e.imageURL}});function we(){var e=Object(d.a)(["\n  height: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n"]);return we=function(){return e},e}function Se(){var e=Object(d.a)(["\n  width: 300px;\n  object-fit: contain;\n  margin: 20px;\n"]);return Se=function(){return e},e}function Ue(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ue=function(){return e},e}function Ie(){var e=Object(d.a)(["\n  margin-top: 20px;\n"]);return Ie=function(){return e},e}function Re(){var e=Object(d.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]);return Re=function(){return e},e}function Me(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Me=function(){return e},e}function Le(){var e=Object(d.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return Le=function(){return e},e}function _e(){var e=Object(d.a)(["\n  width: 100%;\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 20px;\n"]);return _e=function(){return e},e}function ze(){var e=Object(d.a)(["\n  display: block;\n  width: 225px;\n  margin: 20px auto;\n"]);return ze=function(){return e},e}var Ze=O.a.img(ze()),Te=O.a.div(_e()),Ae=O.a.div(Le()),De=O.a.form(Me()),He=Object(O.a)(Z.a)(Re()),Fe=Object(O.a)(M.a)(Ie()),qe=Object(O.a)(_.a)(Ue()),We=O.a.img(Se()),Pe=Object(O.a)(M.a)(we()),Be=function e(t,n,a){Object(l.a)(this,e),this.query=t,this.fullsize=n,this.thumbnail=a},Ne=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={queryText:"",isSearching:!1,imageURLs:[],iSelectedImageURL:null},n.textField=i.a.createRef(),n.onTextInputChanged=n.onTextInputChanged.bind(Object(I.a)(Object(I.a)(n))),n.onSubmit=n.onSubmit.bind(Object(I.a)(Object(I.a)(n))),n.onAddButtonClicked=n.onAddButtonClicked.bind(Object(I.a)(Object(I.a)(n))),n.onImageClicked=n.onImageClicked.bind(Object(I.a)(Object(I.a)(n))),n.onMoreResultsClicked=n.onMoreResultsClicked.bind(Object(I.a)(Object(I.a)(n))),n.onDialogClosed=n.onDialogClosed.bind(Object(I.a)(Object(I.a)(n))),n.onClickHome=n.onClickHome.bind(Object(I.a)(Object(I.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(I.a)(Object(I.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=this.state.isSearching,n=this.state.imageURLs.map(function(e){return e.thumbnail}),a=null===this.state.iSelectedImageURL?"":this.state.imageURLs[this.state.iSelectedImageURL].fullsize;return i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Ze,{src:Ce.a,alt:"logo"}),i.a.createElement(Te,null,e?"--- Mock Version ---":null),i.a.createElement(De,{onSubmit:this.onSubmit},i.a.createElement(He,{autoFocus:!0,inputRef:this.textField,type:"search",variant:"outlined",value:this.state.queryText,onChange:this.onTextInputChanged}),i.a.createElement(Fe,{type:"submit",variant:"outlined"},"ZU"))," ",t?i.a.createElement(Ae,null,i.a.createElement(H.a,{disableShrink:!0})):i.a.createElement(Oe,{imageURLs:n,onImageClicked:this.onImageClicked,onMoreResultsClicked:this.onMoreResultsClicked}),i.a.createElement(qe,{open:null!==this.state.iSelectedImageURL,onClose:this.onDialogClosed},i.a.createElement(We,{src:a}),i.a.createElement(Pe,{color:"primary",variant:"contained",onClick:this.onAddButtonClicked},"ADD TO MY ZUTAN",i.a.createElement(A.a,{style:{marginLeft:"10px"}}))))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.textField.current.blur(),this.setState({imageURLs:[],isSearching:!0},Object(U.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.isMock){e.next=4;break}t.addMockResult(),e.next=6;break;case 4:return e.next=6,t.startImageSearch(t.state.queryText);case 6:t.setState({isSearching:!1});case 7:case"end":return e.stop()}},e,this)})))}},{key:"onAddButtonClicked",value:function(){var e=this.state.iSelectedImageURL;if(null!==e){var t=this.state.imageURLs[e],n={word:t.query,imageURL:t.fullsize};this.props.isMock?this.addToMockObjects(n):this.addToFirestore(n),this.setState({iSelectedImageURL:null})}}},{key:"onTextInputChanged",value:function(e){this.setState({queryText:e.target.value})}},{key:"onImageClicked",value:function(e){this.setState({iSelectedImageURL:e})}},{key:"onMoreResultsClicked",value:function(){this.props.isMock||this.startImageSearch(this.state.queryText)}},{key:"onDialogClosed",value:function(){this.setState({iSelectedImageURL:null})}},{key:"onClickHome",value:function(){this.setState({queryText:"",imageURLs:[]}),this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"addToFirestore",value:function(e){var t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").add(e)}},{key:"addToMockObjects",value:function(e){xe.push({word:e.word,imageURL:e.imageURL})}},{key:"startImageSearch",value:function(){var e=Object(U.a)(S.a.mark(function e(t){var n,a,i,r,c,o,u;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageURLs,a="https://www.googleapis.com/customsearch/v1?key=AIzaSyDJ3dMiO_6lqfYEXF9urIMnHVbWqgPDS2A&cx=006472317582770626127:ifrtdfazlis&num=10&start="+(n.length+1)+"&searchType=image&q="+t,e.next=4,fetch(a);case 4:return i=e.sent,e.next=7,i.json();case 7:for(r=e.sent,c=[],o=0;o<r.items.length;o++)u=r.items[o],c.push(new Be(t,u.link,u.image.thumbnailLink));this.setState({imageURLs:n.concat(c)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addMockResult",value:function(){this.setState({queryText:"apple"});var e=Ee.map(function(e){return new Be("apple",e.full,e.thumb)});this.setState({imageURLs:e})}}]),t}(a.Component),Je=n(156),Ve=n.n(Je),Ge=n(163),Ke=n.n(Ge),Xe=n(160),Ye=n.n(Xe),Qe=n(159),$e=n.n(Qe),et=n(162),tt=n.n(et),nt=n(85),at=n.n(nt),it=n(91),rt=n.n(it),ct=n(92),ot=n.n(ct),ut=n(93),lt=n.n(ut),st=n(161),mt=n.n(st),ht=n(157),pt=n.n(ht),dt=n(158),ft=n.n(dt);function bt(){var e=Object(d.a)(["\n  position: absolute;\n  right: 5px;\n"]);return bt=function(){return e},e}function gt(){var e=Object(d.a)(["\n  position: absolute;\n  right: 5px;\n"]);return gt=function(){return e},e}function kt(){var e=Object(d.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  padding: 0 10px;\n  object-fit: contain;\n  object-position: 0 50%;\n"]);return kt=function(){return e},e}function jt(){var e=Object(d.a)(["\n  flex-wrap: nowrap;\n"]);return jt=function(){return e},e}function vt(){var e=Object(d.a)(["\n  margin: 10px 0;\n"]);return vt=function(){return e},e}var Ot=O.a.div(vt()),yt=Object(O.a)(Ve.a)(jt()),Ct=O.a.img(kt()),Et=Object(O.a)(pt.a)(gt()),xt=Object(O.a)(ft.a)(bt()),wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={anchorEl:null},n.onMenuClosed=n.onMenuClosed.bind(Object(I.a)(Object(I.a)(n))),n.onShowMenuClicked=n.onShowMenuClicked.bind(Object(I.a)(Object(I.a)(n))),n.onWeblioClicked=n.onWeblioClicked.bind(Object(I.a)(Object(I.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.words,a=t.word2urls,r=this.state.anchorEl,c=Boolean(r);return i.a.createElement(Ot,null,i.a.createElement(ce.a,{container:!0,spacing:16},n.map(function(t){return i.a.createElement(ce.a,{key:t,item:!0,xs:!0},i.a.createElement(ue.a,{raised:!0},i.a.createElement($e.a,{avatar:i.a.createElement(Ye.a,{"aria-label":"Word"},t[0]&&t[0].toUpperCase()),action:i.a.createElement("div",null,i.a.createElement(N.a,{onClick:e.onShowMenuClicked},i.a.createElement(mt.a,null)),i.a.createElement(at.a,null,i.a.createElement(tt.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:e.onMenuClosed},i.a.createElement(rt.a,{onClick:function(){e.onWeblioClicked(t)}},i.a.createElement(ot.a,null,i.a.createElement(Et,null)),i.a.createElement(lt.a,{primary:"Weblio"})),i.a.createElement(rt.a,null,i.a.createElement(ot.a,null,i.a.createElement(xt,null)),i.a.createElement(lt.a,{primary:"Delete (TODO)"}))))),title:t}),i.a.createElement(se.a,null,i.a.createElement(yt,{cols:1.2},a[t].map(function(e){return i.a.createElement(Ke.a,{key:e},i.a.createElement(Ct,{src:e,alt:t}))})))))})))}},{key:"onMenuClosed",value:function(){this.setState({anchorEl:null})}},{key:"onShowMenuClicked",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"onWeblioClicked",value:function(e){window.open("https://ejje.weblio.jp/content/"+e),this.onMenuClosed()}}]),t}(a.Component);function St(){var e=Object(d.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return St=function(){return e},e}function Ut(){var e=Object(d.a)(["\n  margin: 10px;\n"]);return Ut=function(){return e},e}var It=O.a.div(Ut()),Rt=O.a.div(St()),Mt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={zutanObjects:[],isZutanObjectsReady:!1},n.onClickHome=n.onClickHome.bind(Object(I.a)(Object(I.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(I.a)(Object(I.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isMock?this.loadZutanMockObjects():this.loadZutanObjects()}},{key:"render",value:function(){if(this.state.isZutanObjectsReady){var e=[],t={};this.state.zutanObjects.forEach(function(n){t.hasOwnProperty(n.word)?t[n.word].push(n.imageURL):(t[n.word]=[n.imageURL],e.push(n.word))}),e.sort();var n,a=[],r=this.props.width;return n="xs"===r?1:3,e.forEach(function(e,t){t%n===0&&a.push([]),a[a.length-1].push(e)}),i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(It,null,a.map(function(e,n){return i.a.createElement(wt,{key:n,words:e,word2urls:t})})))}return i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Rt,null,i.a.createElement(H.a,{disableShrink:!0})))}},{key:"loadZutanObjects",value:function(){var e=this,t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").get().then(function(t){var n=[];t.forEach(function(e){var t=e.data();n.push({word:t.word,imageURL:t.imageURL})}),e.setState({zutanObjects:n,isZutanObjectsReady:!0})})}},{key:"loadZutanMockObjects",value:function(){this.setState({zutanObjects:xe,isZutanObjectsReady:!0})}},{key:"onClickHome",value:function(){this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}}]),t}(a.Component),Lt=ne()()(Mt);function _t(){var e=Object(d.a)(["\n  width: 100%;\n  height: 100%;\n"]);return _t=function(){return e},e}var zt=O.a.div(_t()),Zt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isSignedIn:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=!e&&!this.state.isSignedIn,n=Object(v.createGenerateClassName)(),a=Object(j.create)(Object(u.a)({},Object(v.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),r=i.a.createElement(f.a,{basename:"/zutan"},i.a.createElement("div",null,i.a.createElement(b.a,{exact:!0,path:"/",render:function(t){var n=t.history;return i.a.createElement(Ne,{history:n,isMock:e})}}),i.a.createElement(b.a,{path:"/myzutan",render:function(t){var n=t.history;return i.a.createElement(Lt,{history:n,isMock:e})}})));return i.a.createElement(k.a,{jss:a,generateClassName:n},i.a.createElement(zt,null,t?i.a.createElement(x,null):r))}},{key:"componentDidMount",value:function(){this.addFirebaseAuthListener()}},{key:"addFirebaseAuthListener",value:function(){var e=this;o.auth().onAuthStateChanged(function(t){t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1})})}}]),t}(a.Component),Tt={apiKey:"AIzaSyCr403V4WFUSNUp0oXOLxsJGpDxOl-DwrI",authDomain:"zu-tan.firebaseapp.com",projectId:"zu-tan"};n(360),o.initializeApp(Tt),o.firestore().settings({timestampsInSnapshots:!0});var At=!1;console.log("process.env.REACT_APP_MOCK: 1"),console.log("process.env.PUBLIC_URL: /zutan"),At=!0,c.a.render(i.a.createElement(Zt,{isMock:At}),document.getElementById("root"))}},[[168,2,1]]]);
//# sourceMappingURL=main.ae2a1dec.chunk.js.map