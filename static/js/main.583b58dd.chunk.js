(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n.p+"static/media/zutan.e200f990.svg"},167:function(e,t,n){e.exports=n(358)},180:function(e,t,n){},358:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(20),c=n.n(r),o=n(21),l=(n(180),n(165)),u=n(23),s=n(25),m=n(28),h=n(26),d=n(27),p=n(12),f=n(360),b=n(361),g=n(143),k=n.n(g),j=n(45),v=n(67),O=n(13),y=n(86);n(220);function C(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return C=function(){return e},e}var E=O.a.div(C()),x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).firebaseUIConfig={callbacks:{signInSuccessWithAuthResult:function(e,t){return console.log("signInSuccessWithAuthResult:",e),n.firebaseUI.reset(),!1},uiShown:function(){n.setState({firebaseUIShown:!0})}},credentialHelper:y.auth.CredentialHelper.NONE,signInOptions:[o.auth.EmailAuthProvider.PROVIDER_ID]},n.state={firebaseUIShown:!1},n.firebaseUI=new y.auth.AuthUI(o.auth()),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.firebaseUIShown;return i.a.createElement(E,null,i.a.createElement("div",{className:"firebaseui-auth-container"}),!e&&i.a.createElement("div",null,"Loading..."))}},{key:"componentDidMount",value:function(){this.startFirebaseUI()}},{key:"componentWillUnmount",value:function(){this.stopFirebaseUI()}},{key:"startFirebaseUI",value:function(){this.firebaseUI.start(".firebaseui-auth-container",this.firebaseUIConfig)}},{key:"stopFirebaseUI",value:function(){this.firebaseUI.reset()}}]),t}(a.Component),S=n(50),U=n.n(S),w=n(89),R=n(10),I=n(90),M=n.n(I),L=n(155),_=n.n(L),z=n(154),Z=n.n(z),T=n(156),A=n.n(T),D=n(68),H=n.n(D),F=n(148),q=n.n(F),W=n(147),P=n.n(W),B=n(47),N=n.n(B),J=n(150),V=n.n(J),G=n(149),K=n.n(G);function X(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return X=function(){return e},e}var Y=Object(O.a)(P.a)(X()),Q=function(e){return i.a.createElement(q.a,{position:"static"},i.a.createElement(Y,null,i.a.createElement(N.a,{color:"inherit",onClick:e.onClickMyZutan},i.a.createElement(K.a,null)),i.a.createElement(N.a,{color:"inherit",onClick:e.onClickHome},i.a.createElement(V.a,null))))},$=n(66),ee=n.n($),te=n(64),ne=n.n(te),ae=n(65),ie=n.n(ae),re=n(48),ce=n.n(re),oe=n(49),le=n.n(oe),ue=n(151),se=n.n(ue),me=n(152),he=n.n(me);function de(){var e=Object(p.a)(["\n  object-fit: contain;\n  display: block;\n  margin: auto;\n"]);return de=function(){return e},e}function pe(){var e=Object(p.a)(["\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n"]);return pe=function(){return e},e}function fe(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return fe=function(){return e},e}var be=O.a.div(fe()),ge=O.a.div(pe()),ke=O.a.img(de()),je=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.imageURLs;switch(this.props.width){case"xs":e=2;break;case"sm":e=4;break;default:e=5}return i.a.createElement(be,null,i.a.createElement(ce.a,{cols:e,spacing:16}," ",n.map(function(e,n){return i.a.createElement(le.a,{key:e},i.a.createElement(ne.a,{onClick:function(){return t.props.onImageClicked(n)}},i.a.createElement(ie.a,null,i.a.createElement(ke,{src:e}))))}))," ",0<this.props.imageURLs.length&&i.a.createElement(ge,null,i.a.createElement(se.a,{variant:"extended",onClick:this.props.onMoreResultsClicked},i.a.createElement(he.a,null),"More Results")))}}]),t}(a.Component),ve=ee()()(je),Oe=n(153),ye=n.n(Oe),Ce=[{thumb:"/mockdata/apple0_thumb.jpg",full:"/mockdata/apple0_full.jpg"},{thumb:"/mockdata/apple1_thumb.png",full:"/mockdata/apple1_full.png"},{thumb:"/mockdata/apple2_thumb.png",full:"/mockdata/apple2_full.jpg"},{thumb:"/mockdata/apple3_thumb.jpg",full:"/mockdata/apple3_full.jpg"},{thumb:"/mockdata/apple4_thumb.png",full:"/mockdata/apple4_full.png"},{thumb:"/mockdata/apple5_thumb.png",full:"/mockdata/apple5_full.jpg"},{thumb:"/mockdata/apple6_thumb.png",full:"/mockdata/apple6_full.png"},{thumb:"/mockdata/apple7_thumb.png",full:"/mockdata/apple7_full.png"},{thumb:"/mockdata/apple8_thumb.png",full:"/mockdata/apple8_full.jpg"},{thumb:"/mockdata/apple9_thumb.png",full:"/mockdata/apple9_full.png"}].map(function(e){return{thumb:"/zutan"+e.thumb,full:"/zutan"+e.full}}),Ee=[{word:"rice",imageURL:"/mockdata/rice0_full.jpg"},{word:"run",imageURL:"/mockdata/run0_full.png"},{word:"doggy",imageURL:"/mockdata/doggy0_full.jpg"},{word:"doggy",imageURL:"/mockdata/doggy1_full.jpg"}].map(function(e){return{word:e.word,imageURL:"/zutan"+e.imageURL}});function xe(){var e=Object(p.a)(["\n  height: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n"]);return xe=function(){return e},e}function Se(){var e=Object(p.a)(["\n  width: 300px;\n  object-fit: contain;\n  margin: 20px;\n"]);return Se=function(){return e},e}function Ue(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ue=function(){return e},e}function we(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return we=function(){return e},e}function Re(){var e=Object(p.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]);return Re=function(){return e},e}function Ie(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ie=function(){return e},e}function Me(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return Me=function(){return e},e}function Le(){var e=Object(p.a)(["\n  width: 100%;\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 20px;\n"]);return Le=function(){return e},e}function _e(){var e=Object(p.a)(["\n  display: block;\n  width: 225px;\n  margin: 20px auto;\n"]);return _e=function(){return e},e}var ze=O.a.img(_e()),Ze=O.a.div(Le()),Te=O.a.div(Me()),Ae=O.a.form(Ie()),De=Object(O.a)(Z.a)(Re()),He=Object(O.a)(M.a)(we()),Fe=Object(O.a)(_.a)(Ue()),qe=O.a.img(Se()),We=Object(O.a)(M.a)(xe()),Pe=function e(t,n,a){Object(u.a)(this,e),this.query=t,this.fullsize=n,this.thumbnail=a},Be=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={queryText:"",isSearching:!1,imageURLs:[],iSelectedImageURL:null},n.textField=i.a.createRef(),n.onTextInputChanged=n.onTextInputChanged.bind(Object(R.a)(Object(R.a)(n))),n.onSubmit=n.onSubmit.bind(Object(R.a)(Object(R.a)(n))),n.onAddButtonClicked=n.onAddButtonClicked.bind(Object(R.a)(Object(R.a)(n))),n.onImageClicked=n.onImageClicked.bind(Object(R.a)(Object(R.a)(n))),n.onMoreResultsClicked=n.onMoreResultsClicked.bind(Object(R.a)(Object(R.a)(n))),n.onDialogClosed=n.onDialogClosed.bind(Object(R.a)(Object(R.a)(n))),n.onClickHome=n.onClickHome.bind(Object(R.a)(Object(R.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(R.a)(Object(R.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=this.state.isSearching,n=this.state.imageURLs.map(function(e){return e.thumbnail}),a=null===this.state.iSelectedImageURL?"":this.state.imageURLs[this.state.iSelectedImageURL].fullsize;return i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(ze,{src:ye.a,alt:"logo"}),i.a.createElement(Ze,null,e?"--- Mock Version ---":null),i.a.createElement(Ae,{onSubmit:this.onSubmit},i.a.createElement(De,{autoFocus:!0,inputRef:this.textField,type:"search",variant:"outlined",value:this.state.queryText,onChange:this.onTextInputChanged}),i.a.createElement(He,{type:"submit",variant:"outlined"},"ZU"))," ",t?i.a.createElement(Te,null,i.a.createElement(H.a,{disableShrink:!0})):i.a.createElement(ve,{imageURLs:n,onImageClicked:this.onImageClicked,onMoreResultsClicked:this.onMoreResultsClicked}),i.a.createElement(Fe,{open:null!==this.state.iSelectedImageURL,onClose:this.onDialogClosed},i.a.createElement(qe,{src:a}),i.a.createElement(We,{color:"primary",variant:"contained",onClick:this.onAddButtonClicked},"ADD TO MY ZUTAN",i.a.createElement(A.a,{style:{marginLeft:"10px"}}))))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.textField.current.blur(),this.setState({imageURLs:[],isSearching:!0},Object(w.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.isMock){e.next=4;break}t.addMockResult(),e.next=6;break;case 4:return e.next=6,t.startImageSearch(t.state.queryText);case 6:t.setState({isSearching:!1});case 7:case"end":return e.stop()}},e,this)})))}},{key:"onAddButtonClicked",value:function(){var e=this.state.iSelectedImageURL;if(null!==e){var t=this.state.imageURLs[e],n={word:t.query,imageURL:t.fullsize};this.props.isMock?this.addToMockObjects(n):this.addToFirestore(n),this.setState({iSelectedImageURL:null})}}},{key:"onTextInputChanged",value:function(e){this.setState({queryText:e.target.value})}},{key:"onImageClicked",value:function(e){this.setState({iSelectedImageURL:e})}},{key:"onMoreResultsClicked",value:function(){this.props.isMock||this.startImageSearch(this.state.queryText)}},{key:"onDialogClosed",value:function(){this.setState({iSelectedImageURL:null})}},{key:"onClickHome",value:function(){this.setState({queryText:"",imageURLs:[]}),this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"addToFirestore",value:function(e){var t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").add(e)}},{key:"addToMockObjects",value:function(e){Ee.push({word:e.word,imageURL:e.imageURL})}},{key:"startImageSearch",value:function(){var e=Object(w.a)(U.a.mark(function e(t){var n,a,i,r,c,o,l;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageURLs,a="https://www.googleapis.com/customsearch/v1?key=AIzaSyDJ3dMiO_6lqfYEXF9urIMnHVbWqgPDS2A&cx=006472317582770626127:ifrtdfazlis&num=10&start="+(n.length+1)+"&searchType=image&q="+t,e.next=4,fetch(a);case 4:return i=e.sent,e.next=7,i.json();case 7:for(r=e.sent,c=[],o=0;o<r.items.length;o++)l=r.items[o],c.push(new Pe(t,l.link,l.image.thumbnailLink));this.setState({imageURLs:n.concat(c)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addMockResult",value:function(){this.setState({queryText:"apple"});var e=Ce.map(function(e){return new Pe("apple",e.full,e.thumb)});this.setState({imageURLs:e})}}]),t}(a.Component),Ne=n(160),Je=n.n(Ne),Ve=n(159),Ge=n.n(Ve),Ke=n(162),Xe=n.n(Ke),Ye=n(85),Qe=n.n(Ye),$e=n(91),et=n.n($e),tt=n(92),nt=n.n(tt),at=n(93),it=n.n(at),rt=n(161),ct=n.n(rt),ot=n(157),lt=n.n(ot),ut=n(158),st=n.n(ut);function mt(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return mt=function(){return e},e}function ht(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return ht=function(){return e},e}function dt(){var e=Object(p.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  padding: 0 10px;\n  object-fit: contain;\n  object-position: 0 50%;\n"]);return dt=function(){return e},e}function pt(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return pt=function(){return e},e}function ft(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return ft=function(){return e},e}var bt=O.a.div(ft()),gt=O.a.div(pt()),kt=O.a.img(dt()),jt=Object(O.a)(lt.a)(ht()),vt=Object(O.a)(st.a)(mt()),Ot=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={zutanObjects:[],isZutanObjectsReady:!1,anchorEl:null},n.onMenuClosed=n.onMenuClosed.bind(Object(R.a)(Object(R.a)(n))),n.onShowMenuClicked=n.onShowMenuClicked.bind(Object(R.a)(Object(R.a)(n))),n.onWeblioClicked=n.onWeblioClicked.bind(Object(R.a)(Object(R.a)(n))),n.onClickHome=n.onClickHome.bind(Object(R.a)(Object(R.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(R.a)(Object(R.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isMock?this.loadZutanMockObjects():this.loadZutanObjects()}},{key:"render",value:function(){var e=this;if(this.state.isZutanObjectsReady){var t,n=[],a={};this.state.zutanObjects.forEach(function(e){a.hasOwnProperty(e.word)?a[e.word].push(e.imageURL):(a[e.word]=[e.imageURL],n.push(e.word))}),n.sort(),t="xs"===this.props.width?1:3;var r=this.state.anchorEl,c=Boolean(r);return i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(bt,null,i.a.createElement(ce.a,{cols:t,cellHeight:300,spacing:16}," ",n.map(function(t,n){return i.a.createElement(le.a,{key:t},i.a.createElement(ne.a,{raised:!0},i.a.createElement(Ge.a,{avatar:i.a.createElement(Je.a,{"aria-label":"Word"},t[0]&&t[0].toUpperCase()),action:i.a.createElement("div",null,i.a.createElement(N.a,{onClick:e.onShowMenuClicked},i.a.createElement(ct.a,null)),i.a.createElement(Qe.a,null,i.a.createElement(Xe.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:e.onMenuClosed},i.a.createElement(et.a,{onClick:function(){e.onWeblioClicked(t)}},i.a.createElement(nt.a,null,i.a.createElement(jt,null)),i.a.createElement(it.a,{primary:"Weblio"})),i.a.createElement(et.a,null,i.a.createElement(nt.a,null,i.a.createElement(vt,null)),i.a.createElement(it.a,{primary:"Delete (TODO)"}))))),title:t}),i.a.createElement(ie.a,null,i.a.createElement(ce.a,{cols:1.2},a[t].map(function(e){return i.a.createElement(le.a,{key:e},i.a.createElement(kt,{src:e,alt:t}))})))))}))))}return i.a.createElement("div",null,i.a.createElement(Q,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(gt,null,i.a.createElement(H.a,{disableShrink:!0})))}},{key:"loadZutanObjects",value:function(){var e=this,t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").get().then(function(t){var n=[];t.forEach(function(e){var t=e.data();n.push({word:t.word,imageURL:t.imageURL})}),e.setState({zutanObjects:n,isZutanObjectsReady:!0})})}},{key:"loadZutanMockObjects",value:function(){this.setState({zutanObjects:Ee,isZutanObjectsReady:!0})}},{key:"onClickHome",value:function(){this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"onMenuClosed",value:function(){this.setState({anchorEl:null})}},{key:"onShowMenuClicked",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"onWeblioClicked",value:function(e){window.open("https://ejje.weblio.jp/content/"+e),this.onMenuClosed()}}]),t}(a.Component),yt=ee()()(Ot);function Ct(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n"]);return Ct=function(){return e},e}var Et=O.a.div(Ct()),xt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isSignedIn:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=!e&&!this.state.isSignedIn,n=Object(v.createGenerateClassName)({dangerouslyUseGlobalCSS:!0}),a=Object(j.create)(Object(l.a)({},Object(v.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),r=i.a.createElement(f.a,{basename:"/zutan"},i.a.createElement("div",null,i.a.createElement(b.a,{exact:!0,path:"/",render:function(t){var n=t.history;return i.a.createElement(Be,{history:n,isMock:e})}}),i.a.createElement(b.a,{path:"/myzutan",render:function(t){var n=t.history;return i.a.createElement(yt,{history:n,isMock:e})}})));return i.a.createElement(k.a,{jss:a,generateClassName:n},i.a.createElement(Et,null,t?i.a.createElement(x,null):r))}},{key:"componentDidMount",value:function(){this.addFirebaseAuthListener()}},{key:"addFirebaseAuthListener",value:function(){var e=this;o.auth().onAuthStateChanged(function(t){t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1})})}}]),t}(a.Component),St={apiKey:"AIzaSyCr403V4WFUSNUp0oXOLxsJGpDxOl-DwrI",authDomain:"zu-tan.firebaseapp.com",projectId:"zu-tan"};n(357),o.initializeApp(St),o.firestore().settings({timestampsInSnapshots:!0});var Ut=!1;console.log("process.env.REACT_APP_MOCK: 1"),console.log("process.env.PUBLIC_URL: /zutan"),Ut=!0,c.a.render(i.a.createElement(xt,{isMock:Ut}),document.getElementById("root"))}},[[167,2,1]]]);
//# sourceMappingURL=main.583b58dd.chunk.js.map