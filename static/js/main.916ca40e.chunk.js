(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n.p+"static/media/zutan.e200f990.svg"},170:function(e,t,n){e.exports=n(362)},184:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(20),o=n.n(r),c=n(22),u=(n(184),n(168)),s=n(23),l=n(26),m=n(28),h=n(27),d=n(29),p=n(11),f=n(364),b=n(365),g=n(143),k=n.n(g),j=n(47),v=n(68),O=n(12),y=n(87);n(224);function C(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return C=function(){return e},e}var E=O.a.div(C()),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).firebaseUIConfig={callbacks:{signInSuccessWithAuthResult:function(e,t){return console.log("signInSuccessWithAuthResult:",e),n.firebaseUI.reset(),!1},uiShown:function(){n.setState({firebaseUIShown:!0})}},credentialHelper:y.auth.CredentialHelper.NONE,signInOptions:[c.auth.EmailAuthProvider.PROVIDER_ID]},n.state={firebaseUIShown:!1},n.firebaseUI=new y.auth.AuthUI(c.auth()),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.firebaseUIShown;return i.a.createElement(E,null,i.a.createElement("div",{className:"firebaseui-auth-container"}),!e&&i.a.createElement("div",null,"Loading..."))}},{key:"componentDidMount",value:function(){this.startFirebaseUI()}},{key:"componentWillUnmount",value:function(){this.stopFirebaseUI()}},{key:"startFirebaseUI",value:function(){this.firebaseUI.start(".firebaseui-auth-container",this.firebaseUIConfig)}},{key:"stopFirebaseUI",value:function(){this.firebaseUI.reset()}}]),t}(a.Component),x=n(52),M=n.n(x),R=n(90),S=n(10),U=n(91),I=n.n(U),L=n(40),D=n.n(L),T=n(64),Z=n.n(T),z=n(156),H=n.n(z),A=n(155),F=n.n(A),P=n(154),q=n.n(P),B=n(157),N=n.n(B),W=n(69),V=n.n(W),_=n(148),G=n.n(_),J=n(147),K=n.n(J),Y=n(49),Q=n.n(Y),X=n(150),$=n.n(X),ee=n(149),te=n.n(ee);function ne(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return ne=function(){return e},e}var ae=Object(O.a)(K.a)(ne()),ie=function(e){return i.a.createElement(G.a,{position:"static"},i.a.createElement(ae,null,i.a.createElement(Q.a,{color:"inherit",onClick:e.onClickMyZutan},i.a.createElement(te.a,null)),i.a.createElement(Q.a,{color:"inherit",onClick:e.onClickHome},i.a.createElement($.a,null))))},re=n(67),oe=n.n(re),ce=n(65),ue=n.n(ce),se=n(66),le=n.n(se),me=n(50),he=n.n(me),de=n(51),pe=n.n(de),fe=n(151),be=n.n(fe),ge=n(152),ke=n.n(ge);function je(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return je=function(){return e},e}function ve(){var e=Object(p.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(p.a)(["\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return ye=function(){return e},e}var Ce=O.a.div(ye()),Ee=O.a.div(Oe()),we=O.a.img(ve()),xe=Object(O.a)(ue.a)(je()),Me=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.imageURLs;switch(this.props.width){case"xs":e=2;break;case"sm":e=4;break;default:e=5}return i.a.createElement(Ce,null,i.a.createElement(he.a,{cols:e,cellHeight:"auto",spacing:16}," ",n.map(function(e,n){return i.a.createElement(pe.a,{key:e},i.a.createElement(xe,{raised:!0,onClick:function(){return t.props.onImageClicked(n)}},i.a.createElement(le.a,null,i.a.createElement(we,{src:e}))))}))," ",0<this.props.imageURLs.length&&i.a.createElement(Ee,null,i.a.createElement(be.a,{variant:"extended",onClick:this.props.onMoreResultsClicked},i.a.createElement(ke.a,null),"More Results")))}}]),t}(a.Component),Re=oe()()(Me),Se=n(153),Ue=n.n(Se),Ie=["/mockdata/apple01.jpg","/mockdata/apple02.jpg","/mockdata/apple03.jpg","/mockdata/apple04.jpg","/mockdata/apple05.jpg","/mockdata/apple06.jpg","/mockdata/apple07.jpg","/mockdata/apple08.jpg","/mockdata/apple09.jpg","/mockdata/apple10.jpg"].map(function(e){return"/zutan"+e}),Le=[{word:"doggy",imageURL:"/mockdata/doggy01.jpg"},{word:"doggy",imageURL:"/mockdata/doggy02.jpg"},{word:"\u9eb5\u689d",imageURL:"/mockdata/noodle01.jpg"},{word:"\u9eb5\u689d",imageURL:"/mockdata/noodle02.jpg"},{word:"\uad70\uc911",imageURL:"/mockdata/crowd01.jpg"},{word:"\uad70\uc911",imageURL:"/mockdata/crowd02.jpg"}].map(function(e){return{word:e.word,imageURL:"/zutan"+e.imageURL}});function De(){var e=Object(p.a)(["\n  height: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n"]);return De=function(){return e},e}function Te(){var e=Object(p.a)(["\n  width: 300px;\n  object-fit: contain;\n  margin: 20px;\n"]);return Te=function(){return e},e}function Ze(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ze=function(){return e},e}function ze(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return ze=function(){return e},e}function He(){var e=Object(p.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]);return He=function(){return e},e}function Ae(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ae=function(){return e},e}function Fe(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return Fe=function(){return e},e}function Pe(){var e=Object(p.a)(["\n  width: 230px;\n  margin: 20px auto;\n  text-align: center;\n"]);return Pe=function(){return e},e}function qe(){var e=Object(p.a)(["\n  display: block;\n  width: 225px;\n  margin: 20px auto;\n"]);return qe=function(){return e},e}var Be=O.a.img(qe()),Ne=Object(O.a)(D.a)(Pe()),We=O.a.div(Fe()),Ve=O.a.form(Ae()),_e=Object(O.a)(q.a)(He()),Ge=Object(O.a)(I.a)(ze()),Je=Object(O.a)(F.a)(Ze()),Ke=O.a.img(Te()),Ye=Object(O.a)(I.a)(De()),Qe=function e(t,n,a){Object(s.a)(this,e),this.query=t,this.fullsize=n,this.thumbnail=a},Xe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).DEMO_STRING="This is a demo version. In this version, the image search results are always the same. Click here to see how to build a full version.",n.state={queryText:"",isSearching:!1,imageURLs:[],iSelectedImageURL:null},n.textField=i.a.createRef(),n.onTextInputChanged=n.onTextInputChanged.bind(Object(S.a)(Object(S.a)(n))),n.onSubmit=n.onSubmit.bind(Object(S.a)(Object(S.a)(n))),n.onDemoVersionPaperClick=n.onDemoVersionPaperClick.bind(Object(S.a)(Object(S.a)(n))),n.onAddButtonClicked=n.onAddButtonClicked.bind(Object(S.a)(Object(S.a)(n))),n.onImageClicked=n.onImageClicked.bind(Object(S.a)(Object(S.a)(n))),n.onMoreResultsClicked=n.onMoreResultsClicked.bind(Object(S.a)(Object(S.a)(n))),n.onDialogClosed=n.onDialogClosed.bind(Object(S.a)(Object(S.a)(n))),n.onClickHome=n.onClickHome.bind(Object(S.a)(Object(S.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=this.state.isSearching,n=this.state.imageURLs.map(function(e){return e.thumbnail}),a=null===this.state.iSelectedImageURL?"":this.state.imageURLs[this.state.iSelectedImageURL].fullsize;return i.a.createElement("div",null,i.a.createElement(ie,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Be,{src:Ue.a,alt:"logo"})," ",e?i.a.createElement(H.a,{title:this.DEMO_STRING},i.a.createElement(Ne,{onClick:this.onDemoVersionPaperClick},i.a.createElement(Z.a,{variant:"h6"},"Demo Version"))):null,i.a.createElement(Ve,{onSubmit:this.onSubmit},i.a.createElement(_e,{autoFocus:!0,inputRef:this.textField,type:"search",variant:"outlined",value:this.state.queryText,onChange:this.onTextInputChanged}),i.a.createElement(Ge,{type:"submit",variant:"outlined"},"ZU"))," ",t?i.a.createElement(We,null,i.a.createElement(V.a,{disableShrink:!0})):i.a.createElement(Re,{imageURLs:n,onImageClicked:this.onImageClicked,onMoreResultsClicked:this.onMoreResultsClicked}),i.a.createElement(Je,{open:null!==this.state.iSelectedImageURL,onClose:this.onDialogClosed},i.a.createElement(Ke,{src:a}),i.a.createElement(Ye,{color:"primary",variant:"contained",onClick:this.onAddButtonClicked},"ADD TO MY ZUTAN",i.a.createElement(N.a,{style:{marginLeft:"10px"}}))))}},{key:"onDemoVersionPaperClick",value:function(){window.open("https://github.com/higuri/zutan#deployment-on-your-site")}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.textField.current.blur(),this.setState({imageURLs:[],isSearching:!0},Object(R.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.isMock){e.next=4;break}t.addMockResult(),e.next=6;break;case 4:return e.next=6,t.startImageSearch(t.state.queryText);case 6:t.setState({isSearching:!1});case 7:case"end":return e.stop()}},e,this)})))}},{key:"onAddButtonClicked",value:function(){var e=this.state.iSelectedImageURL;if(null!==e){var t=this.state.imageURLs[e],n={word:t.query,imageURL:t.fullsize};this.props.isMock?this.addToMockObjects(n):this.addToFirestore(n),this.setState({iSelectedImageURL:null})}}},{key:"onTextInputChanged",value:function(e){this.setState({queryText:e.target.value})}},{key:"onImageClicked",value:function(e){this.setState({iSelectedImageURL:e})}},{key:"onMoreResultsClicked",value:function(){this.props.isMock||this.startImageSearch(this.state.queryText)}},{key:"onDialogClosed",value:function(){this.setState({iSelectedImageURL:null})}},{key:"onClickHome",value:function(){this.setState({queryText:"",imageURLs:[]}),this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"addToFirestore",value:function(e){var t=c.auth().currentUser;null!==t&&c.firestore().collection("users").doc(t.uid).collection("zutan").add(e)}},{key:"addToMockObjects",value:function(e){Le.push({word:e.word,imageURL:e.imageURL})}},{key:"startImageSearch",value:function(){var e=Object(R.a)(M.a.mark(function e(t){var n,a,i,r,o,c,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageURLs,a="https://www.googleapis.com/customsearch/v1?key=&cx=&num=10&start="+(n.length+1)+"&searchType=image&q="+t,e.next=4,fetch(a);case 4:return i=e.sent,e.next=7,i.json();case 7:for(r=e.sent,o=[],c=0;c<r.items.length;c++)u=r.items[c],o.push(new Qe(t,u.link,u.image.thumbnailLink));this.setState({imageURLs:n.concat(o)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addMockResult",value:function(){this.setState({queryText:"apple"});var e=Ie.map(function(e){return new Qe("apple",e,e)});this.setState({imageURLs:e})}}]),t}(a.Component),$e=n(159),et=n.n($e),tt=n(165),nt=n.n(tt),at=n(161),it=n.n(at),rt=n(86),ot=n.n(rt),ct=n(162),ut=n.n(ct),st=n(163),lt=n.n(st),mt=n(164),ht=n.n(mt),dt=n(160),pt=n.n(dt),ft=n(92),bt=n.n(ft),gt=n(158),kt=n.n(gt);function jt(){var e=Object(p.a)(["\n  flex-wrap: nowrap;\n"]);return jt=function(){return e},e}function vt(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return vt=function(){return e},e}function Ot(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return Ot=function(){return e},e}function yt(){var e=Object(p.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  padding: 0 10px;\n  object-fit: contain;\n  object-position: 0 50%;\n"]);return yt=function(){return e},e}function Ct(){var e=Object(p.a)(["\n  margin: 15px;\n"]);return Ct=function(){return e},e}function Et(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return Et=function(){return e},e}function wt(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return wt=function(){return e},e}var xt=O.a.div(wt()),Mt=O.a.div(Et()),Rt=Object(O.a)(ue.a)(Ct()),St=O.a.img(yt()),Ut=(Object(O.a)(bt.a)(Ot()),Object(O.a)(kt.a)(vt()),Object(O.a)(he.a)(jt())),It=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={zutanObjects:[],isZutanObjectsReady:!1,showMenuWord:null,showMenuElement:null},n.onMenuClosed=n.onMenuClosed.bind(Object(S.a)(Object(S.a)(n))),n.onShowMenuClicked=n.onShowMenuClicked.bind(Object(S.a)(Object(S.a)(n))),n.onDictionaryClicked=n.onDictionaryClicked.bind(Object(S.a)(Object(S.a)(n))),n.onClickHome=n.onClickHome.bind(Object(S.a)(Object(S.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.isMock?this.loadZutanMockObjects():this.loadZutanObjects()}},{key:"render",value:function(){var e=this;if(this.state.isZutanObjectsReady){var t,n=[],a={};switch(this.state.zutanObjects.forEach(function(e){a.hasOwnProperty(e.word)?a[e.word].push(e.imageURL):(a[e.word]=[e.imageURL],n.push(e.word))}),n.sort(),this.props.width){case"xs":t=1;break;case"sm":t=2;break;default:t=3}var r=this.state,o=r.showMenuWord,c=r.showMenuElement,u=Boolean(c);return i.a.createElement("div",null,i.a.createElement(ie,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(xt,null,i.a.createElement(he.a,{cols:t,cellHeight:"auto",spacing:16}," ",n.map(function(t,n){return i.a.createElement(pe.a,{key:t},i.a.createElement(Rt,{raised:!0},i.a.createElement(nt.a,{avatar:function(e){return i.a.createElement(et.a,{"aria-label":"Word"},e[0]&&e[0].toUpperCase())}(t),action:function(t){return i.a.createElement("div",null,i.a.createElement(Q.a,{onClick:function(n){return e.onShowMenuClicked(n,t)}},i.a.createElement(pt.a,null)),i.a.createElement(ot.a,null,i.a.createElement(it.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:e.onMenuClosed},i.a.createElement(ut.a,{onClick:function(){e.onDictionaryClicked(o)}},i.a.createElement(lt.a,null,i.a.createElement(bt.a,null)),i.a.createElement(ht.a,{primary:"Wikitionary"})))))}(t),title:t}),i.a.createElement(le.a,null,i.a.createElement(Ut,{cols:1.2}," ",a[t].map(function(e){return i.a.createElement(pe.a,{key:e},i.a.createElement(St,{src:e,alt:t}))})))))}))))}return i.a.createElement("div",null,i.a.createElement(ie,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Mt,null,i.a.createElement(V.a,{disableShrink:!0})))}},{key:"loadZutanObjects",value:function(){var e=this,t=c.auth().currentUser;null!==t&&c.firestore().collection("users").doc(t.uid).collection("zutan").get().then(function(t){var n=[];t.forEach(function(e){var t=e.data();n.push({word:t.word,imageURL:t.imageURL})}),e.setState({zutanObjects:n,isZutanObjectsReady:!0})})}},{key:"loadZutanMockObjects",value:function(){this.setState({zutanObjects:Le,isZutanObjectsReady:!0})}},{key:"onClickHome",value:function(){this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"onMenuClosed",value:function(){this.setState({showMenuElement:null})}},{key:"onShowMenuClicked",value:function(e,t){this.setState({showMenuWord:t,showMenuElement:e.currentTarget})}},{key:"onDictionaryClicked",value:function(e){window.open("https://en.wiktionary.org/wiki/"+e),this.onMenuClosed()}}]),t}(a.Component),Lt=oe()()(It);function Dt(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n"]);return Dt=function(){return e},e}var Tt=O.a.div(Dt()),Zt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isSignedIn:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=!e&&!this.state.isSignedIn,n=Object(v.createGenerateClassName)({dangerouslyUseGlobalCSS:!0}),a=Object(j.create)(Object(u.a)({},Object(v.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),r=i.a.createElement(f.a,{basename:"/zutan"},i.a.createElement("div",null,i.a.createElement(b.a,{exact:!0,path:"/",render:function(t){var n=t.history;return i.a.createElement(Xe,{history:n,isMock:e})}}),i.a.createElement(b.a,{path:"/myzutan",render:function(t){var n=t.history;return i.a.createElement(Lt,{history:n,isMock:e})}})));return i.a.createElement(k.a,{jss:a,generateClassName:n},i.a.createElement(Tt,null,t?i.a.createElement(w,null):r))}},{key:"componentDidMount",value:function(){this.props.isMock||this.addFirebaseAuthListener()}},{key:"addFirebaseAuthListener",value:function(){var e=this;c.auth().onAuthStateChanged(function(t){t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1})})}}]),t}(a.Component);console.log("process.env.REACT_APP_MOCK: 1"),console.log("process.env.PUBLIC_URL: /zutan");var zt=!1;zt=!0,o.a.render(i.a.createElement(Zt,{isMock:zt}),document.getElementById("root"))}},[[170,2,1]]]);
//# sourceMappingURL=main.916ca40e.chunk.js.map