(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n.p+"static/media/zutan.e200f990.svg"},166:function(e,t,n){e.exports=n(357)},180:function(e,t,n){},357:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(20),c=n.n(r),o=n(22),u=(n(180),n(164)),l=n(23),s=n(25),m=n(27),d=n(26),h=n(28),p=n(11),b=n(359),f=n(360),g=n(142),k=n.n(g),j=n(45),v=n(67),O=n(12),y=n(86);n(220);function C(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return C=function(){return e},e}var E=O.a.div(C()),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).firebaseUIConfig={callbacks:{signInSuccessWithAuthResult:function(e,t){return console.log("signInSuccessWithAuthResult:",e),n.firebaseUI.reset(),!1},uiShown:function(){n.setState({firebaseUIShown:!0})}},credentialHelper:y.auth.CredentialHelper.NONE,signInOptions:[o.auth.EmailAuthProvider.PROVIDER_ID]},n.state={firebaseUIShown:!1},n.firebaseUI=new y.auth.AuthUI(o.auth()),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.firebaseUIShown;return i.a.createElement(E,null,i.a.createElement("div",{className:"firebaseui-auth-container"}),!e&&i.a.createElement("div",null,"Loading..."))}},{key:"componentDidMount",value:function(){this.startFirebaseUI()}},{key:"componentWillUnmount",value:function(){this.stopFirebaseUI()}},{key:"startFirebaseUI",value:function(){this.firebaseUI.start(".firebaseui-auth-container",this.firebaseUIConfig)}},{key:"stopFirebaseUI",value:function(){this.firebaseUI.reset()}}]),t}(a.Component),w=n(50),U=n.n(w),R=n(89),S=n(10),M=n(90),I=n.n(M),L=n(154),Z=n.n(L),T=n(153),z=n.n(T),H=n(155),A=n.n(H),D=n(68),F=n.n(D),q=n(147),W=n.n(q),B=n(146),P=n.n(B),N=n(47),_=n.n(N),G=n(149),J=n.n(G),V=n(148),K=n.n(V);function Y(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return Y=function(){return e},e}var Q=Object(O.a)(P.a)(Y()),X=function(e){return i.a.createElement(W.a,{position:"static"},i.a.createElement(Q,null,i.a.createElement(_.a,{color:"inherit",onClick:e.onClickMyZutan},i.a.createElement(K.a,null)),i.a.createElement(_.a,{color:"inherit",onClick:e.onClickHome},i.a.createElement(J.a,null))))},$=n(66),ee=n.n($),te=n(64),ne=n.n(te),ae=n(65),ie=n.n(ae),re=n(48),ce=n.n(re),oe=n(49),ue=n.n(oe),le=n(150),se=n.n(le),me=n(151),de=n.n(me);function he(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return he=function(){return e},e}function pe(){var e=Object(p.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n"]);return pe=function(){return e},e}function be(){var e=Object(p.a)(["\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n"]);return be=function(){return e},e}function fe(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return fe=function(){return e},e}var ge=O.a.div(fe()),ke=O.a.div(be()),je=O.a.img(pe()),ve=Object(O.a)(ne.a)(he()),Oe=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.imageURLs;switch(this.props.width){case"xs":e=2;break;case"sm":e=4;break;default:e=5}return i.a.createElement(ge,null,i.a.createElement(ce.a,{cols:e,cellHeight:"auto",spacing:16}," ",n.map(function(e,n){return i.a.createElement(ue.a,{key:e},i.a.createElement(ve,{raised:!0,onClick:function(){return t.props.onImageClicked(n)}},i.a.createElement(ie.a,null,i.a.createElement(je,{src:e}))))}))," ",0<this.props.imageURLs.length&&i.a.createElement(ke,null,i.a.createElement(se.a,{variant:"extended",onClick:this.props.onMoreResultsClicked},i.a.createElement(de.a,null),"More Results")))}}]),t}(a.Component),ye=ee()()(Oe),Ce=n(152),Ee=n.n(Ce),xe=["/mockdata/apple01.jpg","/mockdata/apple02.jpg","/mockdata/apple03.jpg","/mockdata/apple04.jpg","/mockdata/apple05.jpg","/mockdata/apple06.jpg","/mockdata/apple07.jpg","/mockdata/apple08.jpg","/mockdata/apple09.jpg","/mockdata/apple10.jpg"].map(function(e){return"/zutan"+e}),we=[{word:"doggy",imageURL:"/mockdata/doggy01.jpg"},{word:"doggy",imageURL:"/mockdata/doggy02.jpg"},{word:"\u9762\u6761",imageURL:"/mockdata/noodle01.jpg"},{word:"\u9762\u6761",imageURL:"/mockdata/noodle02.jpg"},{word:"\uad70\uc911",imageURL:"/mockdata/crowd01.jpg"},{word:"\uad70\uc911",imageURL:"/mockdata/crowd02.jpg"}].map(function(e){return{word:e.word,imageURL:"/zutan"+e.imageURL}});function Ue(){var e=Object(p.a)(["\n  height: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n"]);return Ue=function(){return e},e}function Re(){var e=Object(p.a)(["\n  width: 300px;\n  object-fit: contain;\n  margin: 20px;\n"]);return Re=function(){return e},e}function Se(){var e=Object(p.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Se=function(){return e},e}function Me(){var e=Object(p.a)(["\n  margin-top: 20px;\n"]);return Me=function(){return e},e}function Ie(){var e=Object(p.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]);return Ie=function(){return e},e}function Le(){var e=Object(p.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Le=function(){return e},e}function Ze(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return Ze=function(){return e},e}function Te(){var e=Object(p.a)(["\n  width: 100%;\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 20px;\n"]);return Te=function(){return e},e}function ze(){var e=Object(p.a)(["\n  display: block;\n  width: 225px;\n  margin: 20px auto;\n"]);return ze=function(){return e},e}var He=O.a.img(ze()),Ae=O.a.div(Te()),De=O.a.div(Ze()),Fe=O.a.form(Le()),qe=Object(O.a)(z.a)(Ie()),We=Object(O.a)(I.a)(Me()),Be=Object(O.a)(Z.a)(Se()),Pe=O.a.img(Re()),Ne=Object(O.a)(I.a)(Ue()),_e=function e(t,n,a){Object(l.a)(this,e),this.query=t,this.fullsize=n,this.thumbnail=a},Ge=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={queryText:"",isSearching:!1,imageURLs:[],iSelectedImageURL:null},n.textField=i.a.createRef(),n.onTextInputChanged=n.onTextInputChanged.bind(Object(S.a)(Object(S.a)(n))),n.onSubmit=n.onSubmit.bind(Object(S.a)(Object(S.a)(n))),n.onAddButtonClicked=n.onAddButtonClicked.bind(Object(S.a)(Object(S.a)(n))),n.onImageClicked=n.onImageClicked.bind(Object(S.a)(Object(S.a)(n))),n.onMoreResultsClicked=n.onMoreResultsClicked.bind(Object(S.a)(Object(S.a)(n))),n.onDialogClosed=n.onDialogClosed.bind(Object(S.a)(Object(S.a)(n))),n.onClickHome=n.onClickHome.bind(Object(S.a)(Object(S.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(S.a)(Object(S.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=this.state.isSearching,n=this.state.imageURLs.map(function(e){return e.thumbnail}),a=null===this.state.iSelectedImageURL?"":this.state.imageURLs[this.state.iSelectedImageURL].fullsize;return i.a.createElement("div",null,i.a.createElement(X,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(He,{src:Ee.a,alt:"logo"}),i.a.createElement(Ae,null,e?"--- Mock Version ---":null),i.a.createElement(Fe,{onSubmit:this.onSubmit},i.a.createElement(qe,{autoFocus:!0,inputRef:this.textField,type:"search",variant:"outlined",value:this.state.queryText,onChange:this.onTextInputChanged}),i.a.createElement(We,{type:"submit",variant:"outlined"},"ZU"))," ",t?i.a.createElement(De,null,i.a.createElement(F.a,{disableShrink:!0})):i.a.createElement(ye,{imageURLs:n,onImageClicked:this.onImageClicked,onMoreResultsClicked:this.onMoreResultsClicked}),i.a.createElement(Be,{open:null!==this.state.iSelectedImageURL,onClose:this.onDialogClosed},i.a.createElement(Pe,{src:a}),i.a.createElement(Ne,{color:"primary",variant:"contained",onClick:this.onAddButtonClicked},"ADD TO MY ZUTAN",i.a.createElement(A.a,{style:{marginLeft:"10px"}}))))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.textField.current.blur(),this.setState({imageURLs:[],isSearching:!0},Object(R.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.isMock){e.next=4;break}t.addMockResult(),e.next=6;break;case 4:return e.next=6,t.startImageSearch(t.state.queryText);case 6:t.setState({isSearching:!1});case 7:case"end":return e.stop()}},e,this)})))}},{key:"onAddButtonClicked",value:function(){var e=this.state.iSelectedImageURL;if(null!==e){var t=this.state.imageURLs[e],n={word:t.query,imageURL:t.fullsize};this.props.isMock?this.addToMockObjects(n):this.addToFirestore(n),this.setState({iSelectedImageURL:null})}}},{key:"onTextInputChanged",value:function(e){this.setState({queryText:e.target.value})}},{key:"onImageClicked",value:function(e){this.setState({iSelectedImageURL:e})}},{key:"onMoreResultsClicked",value:function(){this.props.isMock||this.startImageSearch(this.state.queryText)}},{key:"onDialogClosed",value:function(){this.setState({iSelectedImageURL:null})}},{key:"onClickHome",value:function(){this.setState({queryText:"",imageURLs:[]}),this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"addToFirestore",value:function(e){var t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").add(e)}},{key:"addToMockObjects",value:function(e){we.push({word:e.word,imageURL:e.imageURL})}},{key:"startImageSearch",value:function(){var e=Object(R.a)(U.a.mark(function e(t){var n,a,i,r,c,o,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageURLs,a="https://www.googleapis.com/customsearch/v1?key=&cx=&num=10&start="+(n.length+1)+"&searchType=image&q="+t,e.next=4,fetch(a);case 4:return i=e.sent,e.next=7,i.json();case 7:for(r=e.sent,c=[],o=0;o<r.items.length;o++)u=r.items[o],c.push(new _e(t,u.link,u.image.thumbnailLink));this.setState({imageURLs:n.concat(c)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addMockResult",value:function(){this.setState({queryText:"apple"});var e=xe.map(function(e){return new _e("apple",e,e)});this.setState({imageURLs:e})}}]),t}(a.Component),Je=n(158),Ve=n.n(Je),Ke=n(161),Ye=n.n(Ke),Qe=n(160),Xe=n.n(Qe),$e=n(85),et=n.n($e),tt=n(91),nt=n.n(tt),at=n(92),it=n.n(at),rt=n(93),ct=n.n(rt),ot=n(159),ut=n.n(ot),lt=n(156),st=n.n(lt),mt=n(157),dt=n.n(mt);function ht(){var e=Object(p.a)(["\n  flex-wrap: nowrap;\n"]);return ht=function(){return e},e}function pt(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return pt=function(){return e},e}function bt(){var e=Object(p.a)(["\n  position: absolute;\n  right: 5px;\n"]);return bt=function(){return e},e}function ft(){var e=Object(p.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  padding: 0 10px;\n  object-fit: contain;\n  object-position: 0 50%;\n"]);return ft=function(){return e},e}function gt(){var e=Object(p.a)(["\n  margin: 15px;\n"]);return gt=function(){return e},e}function kt(){var e=Object(p.a)(["\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  justify-content: center;\n"]);return kt=function(){return e},e}function jt(){var e=Object(p.a)(["\n  margin: 10px;\n"]);return jt=function(){return e},e}var vt=O.a.div(jt()),Ot=O.a.div(kt()),yt=Object(O.a)(ne.a)(gt()),Ct=O.a.img(ft()),Et=Object(O.a)(st.a)(bt()),xt=Object(O.a)(dt.a)(pt()),wt=Object(O.a)(ce.a)(ht()),Ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={zutanObjects:[],isZutanObjectsReady:!1,anchorEl:null},n.onMenuClosed=n.onMenuClosed.bind(Object(S.a)(Object(S.a)(n))),n.onShowMenuClicked=n.onShowMenuClicked.bind(Object(S.a)(Object(S.a)(n))),n.onWeblioClicked=n.onWeblioClicked.bind(Object(S.a)(Object(S.a)(n))),n.onClickHome=n.onClickHome.bind(Object(S.a)(Object(S.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(S.a)(Object(S.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isMock?this.loadZutanMockObjects():this.loadZutanObjects()}},{key:"render",value:function(){var e=this;if(this.state.isZutanObjectsReady){var t,n=[],a={};switch(this.state.zutanObjects.forEach(function(e){a.hasOwnProperty(e.word)?a[e.word].push(e.imageURL):(a[e.word]=[e.imageURL],n.push(e.word))}),n.sort(),this.props.width){case"xs":t=1;break;case"sm":t=2;break;default:t=3}var r=this.state.anchorEl,c=Boolean(r);return i.a.createElement("div",null,i.a.createElement(X,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(vt,null,i.a.createElement(ce.a,{cols:t,cellHeight:"auto",spacing:16}," ",n.map(function(t,n){return i.a.createElement(ue.a,{key:t},i.a.createElement(yt,{raised:!0},i.a.createElement(Ye.a,{avatar:function(e){return i.a.createElement(Ve.a,{"aria-label":"Word"},e[0]&&e[0].toUpperCase())}(t),action:function(t){return i.a.createElement("div",null,i.a.createElement(_.a,{onClick:e.onShowMenuClicked},i.a.createElement(ut.a,null)),i.a.createElement(et.a,null,i.a.createElement(Xe.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:e.onMenuClosed},i.a.createElement(nt.a,{onClick:function(){e.onWeblioClicked(t)}},i.a.createElement(it.a,null,i.a.createElement(Et,null)),i.a.createElement(ct.a,{primary:"Weblio"})),i.a.createElement(nt.a,null,i.a.createElement(it.a,null,i.a.createElement(xt,null)),i.a.createElement(ct.a,{primary:"Delete (TODO)"})))))}(t),title:t}),i.a.createElement(ie.a,null,i.a.createElement(wt,{cols:1.2}," ",a[t].map(function(e){return i.a.createElement(ue.a,{key:e},i.a.createElement(Ct,{src:e,alt:t}))})))))}))))}return i.a.createElement("div",null,i.a.createElement(X,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Ot,null,i.a.createElement(F.a,{disableShrink:!0})))}},{key:"loadZutanObjects",value:function(){var e=this,t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").get().then(function(t){var n=[];t.forEach(function(e){var t=e.data();n.push({word:t.word,imageURL:t.imageURL})}),e.setState({zutanObjects:n,isZutanObjectsReady:!0})})}},{key:"loadZutanMockObjects",value:function(){this.setState({zutanObjects:we,isZutanObjectsReady:!0})}},{key:"onClickHome",value:function(){this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"onMenuClosed",value:function(){this.setState({anchorEl:null})}},{key:"onShowMenuClicked",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"onWeblioClicked",value:function(e){window.open("https://ejje.weblio.jp/content/"+e),this.onMenuClosed()}}]),t}(a.Component),Rt=ee()()(Ut);function St(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n"]);return St=function(){return e},e}var Mt=O.a.div(St()),It=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isSignedIn:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=!e&&!this.state.isSignedIn,n=Object(v.createGenerateClassName)({dangerouslyUseGlobalCSS:!0}),a=Object(j.create)(Object(u.a)({},Object(v.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),r=i.a.createElement(b.a,{basename:"/zutan"},i.a.createElement("div",null,i.a.createElement(f.a,{exact:!0,path:"/",render:function(t){var n=t.history;return i.a.createElement(Ge,{history:n,isMock:e})}}),i.a.createElement(f.a,{path:"/myzutan",render:function(t){var n=t.history;return i.a.createElement(Rt,{history:n,isMock:e})}})));return i.a.createElement(k.a,{jss:a,generateClassName:n},i.a.createElement(Mt,null,t?i.a.createElement(x,null):r))}},{key:"componentDidMount",value:function(){this.props.isMock||this.addFirebaseAuthListener()}},{key:"addFirebaseAuthListener",value:function(){var e=this;o.auth().onAuthStateChanged(function(t){t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1})})}}]),t}(a.Component);console.log("process.env.REACT_APP_MOCK: 1"),console.log("process.env.PUBLIC_URL: /zutan");var Lt=!1;Lt=!0,c.a.render(i.a.createElement(It,{isMock:Lt}),document.getElementById("root"))}},[[166,2,1]]]);
//# sourceMappingURL=main.4ae052cb.chunk.js.map