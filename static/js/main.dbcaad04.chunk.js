(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,n){e.exports=n.p+"static/media/zutan.e200f990.svg"},167:function(e,t,n){e.exports=n(359)},180:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(21),c=n.n(r),o=n(26),u=(n(180),n(165)),l=n(20),s=n(22),m=n(24),p=n(23),h=n(25),d=n(11),f=n(361),b=n(362),g=n(140),k=n.n(g),j=n(46),O=n(64),v=n(12),y=n(84);n(220);function C(){var e=Object(d.a)(["\n  margin-top: 20px;\n"]);return C=function(){return e},e}var E=v.a.div(C()),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).firebaseUIConfig={callbacks:{signInSuccessWithAuthResult:function(e,t){return console.log("signInSuccessWithAuthResult:",e),n.firebaseUI.reset(),!1},uiShown:function(){n.setState({firebaseUIShown:!0})}},credentialHelper:y.auth.CredentialHelper.NONE,signInOptions:[o.auth.EmailAuthProvider.PROVIDER_ID]},n.state={firebaseUIShown:!1},n.firebaseUI=new y.auth.AuthUI(o.auth()),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.firebaseUIShown;return i.a.createElement(E,null,i.a.createElement("div",{className:"firebaseui-auth-container"}),!e&&i.a.createElement("div",null,"Loading..."))}},{key:"componentDidMount",value:function(){this.startFirebaseUI()}},{key:"componentWillUnmount",value:function(){this.stopFirebaseUI()}},{key:"startFirebaseUI",value:function(){this.firebaseUI.start(".firebaseui-auth-container",this.firebaseUIConfig)}},{key:"stopFirebaseUI",value:function(){this.firebaseUI.reset()}}]),t}(a.Component),x=n(87),I=n.n(x),R=n(144),w=n(10),M=n(88),S=n.n(M),L=n(153),_=n.n(L),z=n(152),A=n.n(z),T=n(154),D=n.n(T),Z=n(146),F=n.n(Z),H=n(145),P=n.n(H),q=n(48),N=n.n(q),W=n(148),B=n.n(W),V=n(147),J=n.n(V);function K(){var e=Object(d.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return K=function(){return e},e}var G=Object(v.a)(P.a)(K()),X=function(e){return i.a.createElement(F.a,{position:"static"},i.a.createElement(G,null,i.a.createElement(N.a,{color:"inherit",onClick:e.onClickMyZutan},i.a.createElement(J.a,null)),i.a.createElement(N.a,{color:"inherit",onClick:e.onClickHome},i.a.createElement(B.a,null))))},Y=n(149),Q=n.n(Y),$=n(63),ee=n.n($),te=n(150),ne=n.n(te),ae=n(41),ie=n.n(ae),re=n(61),ce=n.n(re),oe=n(62),ue=n.n(oe);function le(){var e=Object(d.a)(["\n  object-fit: contain;\n  display: block;\n  margin: auto;\n"]);return le=function(){return e},e}function se(){var e=Object(d.a)(["\n  margin: 10px 0;\n"]);return se=function(){return e},e}var me=v.a.div(se()),pe=v.a.img(le()),he=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(me,null,i.a.createElement(ie.a,{container:!0,alignItems:"center",spacing:8},this.props.imageURLs.map(function(t,n){return i.a.createElement(ie.a,{key:n,item:!0,xs:!0},i.a.createElement(ce.a,{raised:!0,onClick:function(){return e.props.onImageClicked(n)}},i.a.createElement(ue.a,null,i.a.createElement(pe,{src:t}))))})))}}]),t}(a.Component);function de(){var e=Object(d.a)(["\n  margin: 10px auto;\n  display: flex;\n  justify-content: center;\n"]);return de=function(){return e},e}function fe(){var e=Object(d.a)(["\n  margin: 10px;\n"]);return fe=function(){return e},e}var be=v.a.div(fe()),ge=v.a.div(de()),ke=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.props.width){case"xs":e=2;break;case"sm":e=4;break;default:e=5}var n=[];return this.props.imageURLs.forEach(function(t,a){a%e===0&&n.push([]),n[n.length-1].push(t)}),i.a.createElement(be,null,n.map(function(n,a){return i.a.createElement(he,{key:a,imageURLs:n,onImageClicked:function(n){t.props.onImageClicked(a*e+n)}})}),0<this.props.imageURLs.length&&i.a.createElement(ge,null,i.a.createElement(Q.a,{variant:"extended",onClick:this.props.onMoreResultsClicked},i.a.createElement(ne.a,null),"More Results")))}}]),t}(a.Component),je=ee()()(ke),Oe=n(151),ve=n.n(Oe),ye=[{thumb:"/mockdata/apple0_thumb.jpg",full:"/mockdata/apple0_full.jpg"},{thumb:"/mockdata/apple1_thumb.png",full:"/mockdata/apple1_full.png"},{thumb:"/mockdata/apple2_thumb.png",full:"/mockdata/apple2_full.jpg"},{thumb:"/mockdata/apple3_thumb.jpg",full:"/mockdata/apple3_full.jpg"},{thumb:"/mockdata/apple4_thumb.png",full:"/mockdata/apple4_full.png"},{thumb:"/mockdata/apple5_thumb.png",full:"/mockdata/apple5_full.jpg"},{thumb:"/mockdata/apple6_thumb.png",full:"/mockdata/apple6_full.png"},{thumb:"/mockdata/apple7_thumb.png",full:"/mockdata/apple7_full.png"},{thumb:"/mockdata/apple8_thumb.png",full:"/mockdata/apple8_full.jpg"},{thumb:"/mockdata/apple9_thumb.png",full:"/mockdata/apple9_full.png"}],Ce=[{word:"rice",imageURL:"/mockdata/rice0_full.jpg"},{word:"run",imageURL:"/mockdata/run0_full.png"},{word:"doggy",imageURL:"/mockdata/doggy0_full.jpg"},{word:"doggy",imageURL:"/mockdata/doggy1_full.jpg"}];function Ee(){var e=Object(d.a)(["\n  height: 20px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n"]);return Ee=function(){return e},e}function Ue(){var e=Object(d.a)(["\n  width: 300px;\n  object-fit: contain;\n  margin: 20px;\n"]);return Ue=function(){return e},e}function xe(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return xe=function(){return e},e}function Ie(){var e=Object(d.a)(["\n  margin-top: 20px;\n"]);return Ie=function(){return e},e}function Re(){var e=Object(d.a)(["\n  margin-left: auto;\n  margin-right: auto;\n"]);return Re=function(){return e},e}function we(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return we=function(){return e},e}function Me(){var e=Object(d.a)(["\n  width: 100%;\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 20px;\n"]);return Me=function(){return e},e}function Se(){var e=Object(d.a)(["\n  display: block;\n  width: 225px;\n  margin: 20px auto;\n"]);return Se=function(){return e},e}var Le=v.a.img(Se()),_e=v.a.div(Me()),ze=v.a.form(we()),Ae=Object(v.a)(A.a)(Re()),Te=Object(v.a)(S.a)(Ie()),De=Object(v.a)(_.a)(xe()),Ze=v.a.img(Ue()),Fe=Object(v.a)(S.a)(Ee()),He=function e(t,n,a){Object(l.a)(this,e),this.query=t,this.fullsize=n,this.thumbnail=a},Pe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={queryText:"",imageURLs:[],iSelectedImageURL:null},n.textField=i.a.createRef(),n.onTextInputChanged=n.onTextInputChanged.bind(Object(w.a)(Object(w.a)(n))),n.onSubmit=n.onSubmit.bind(Object(w.a)(Object(w.a)(n))),n.onAddButtonClicked=n.onAddButtonClicked.bind(Object(w.a)(Object(w.a)(n))),n.onImageClicked=n.onImageClicked.bind(Object(w.a)(Object(w.a)(n))),n.onMoreResultsClicked=n.onMoreResultsClicked.bind(Object(w.a)(Object(w.a)(n))),n.onDialogClosed=n.onDialogClosed.bind(Object(w.a)(Object(w.a)(n))),n.onClickHome=n.onClickHome.bind(Object(w.a)(Object(w.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(w.a)(Object(w.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=this.state.imageURLs.map(function(e){return e.thumbnail}),n=null===this.state.iSelectedImageURL?"":this.state.imageURLs[this.state.iSelectedImageURL].fullsize;return i.a.createElement("div",null,i.a.createElement(X,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Le,{src:ve.a,alt:"logo"}),i.a.createElement(_e,null,e?"--- Mock Version ---":null),i.a.createElement(ze,{onSubmit:this.onSubmit},i.a.createElement(Ae,{autoFocus:!0,inputRef:this.textField,type:"search",variant:"outlined",value:this.state.queryText,onChange:this.onTextInputChanged}),i.a.createElement(Te,{type:"submit",variant:"outlined"},"ZU")),i.a.createElement(je,{imageURLs:t,onImageClicked:this.onImageClicked,onMoreResultsClicked:this.onMoreResultsClicked}),i.a.createElement(De,{open:null!==this.state.iSelectedImageURL,onClose:this.onDialogClosed},i.a.createElement(Ze,{src:n}),i.a.createElement(Fe,{color:"primary",variant:"contained",onClick:this.onAddButtonClicked},"ADD TO MY ZUTAN",i.a.createElement(D.a,{style:{marginLeft:"10px"}}))))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),this.textField.current.blur(),this.setState({imageURLs:[]},function(){t.props.isMock?t.addMockResult():t.startImageSearch(t.state.queryText)})}},{key:"onAddButtonClicked",value:function(){var e=this.state.iSelectedImageURL;if(null!==e){var t=this.state.imageURLs[e],n={word:t.query,imageURL:t.fullsize};this.props.isMock?this.addToMockObjects(n):this.addToFirestore(n),this.setState({iSelectedImageURL:null})}}},{key:"onTextInputChanged",value:function(e){this.setState({queryText:e.target.value})}},{key:"onImageClicked",value:function(e){this.setState({iSelectedImageURL:e})}},{key:"onMoreResultsClicked",value:function(){this.props.isMock||this.startImageSearch(this.state.queryText)}},{key:"onDialogClosed",value:function(){this.setState({iSelectedImageURL:null})}},{key:"onClickHome",value:function(){this.setState({queryText:"",imageURLs:[]}),this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}},{key:"addToFirestore",value:function(e){var t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").add(e)}},{key:"addToMockObjects",value:function(e){Ce.push({word:e.word,imageURL:e.imageURL})}},{key:"startImageSearch",value:function(){var e=Object(R.a)(I.a.mark(function e(t){var n,a,i,r,c,o,u;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.imageURLs,a="https://www.googleapis.com/customsearch/v1?key=AIzaSyDJ3dMiO_6lqfYEXF9urIMnHVbWqgPDS2A&cx=006472317582770626127:ifrtdfazlis&num=10&start="+(n.length+1)+"&searchType=image&q="+t,e.next=4,fetch(a);case 4:return i=e.sent,e.next=7,i.json();case 7:for(r=e.sent,c=[],o=0;o<r.items.length;o++)u=r.items[o],c.push(new He(t,u.link,u.image.thumbnailLink));this.setState({imageURLs:n.concat(c)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addMockResult",value:function(){this.setState({queryText:"apple"});var e=ye.map(function(e){return new He("apple",e.full,e.thumb)});this.setState({imageURLs:e})}}]),t}(a.Component),qe=n(155),Ne=n.n(qe),We=n(162),Be=n.n(We),Ve=n(159),Je=n.n(Ve),Ke=n(158),Ge=n.n(Ke),Xe=n(161),Ye=n.n(Xe),Qe=n(83),$e=n.n(Qe),et=n(89),tt=n.n(et),nt=n(90),at=n.n(nt),it=n(91),rt=n.n(it),ct=n(160),ot=n.n(ct),ut=n(156),lt=n.n(ut),st=n(157),mt=n.n(st);function pt(){var e=Object(d.a)(["\n  position: absolute;\n  right: 5px;\n"]);return pt=function(){return e},e}function ht(){var e=Object(d.a)(["\n  position: absolute;\n  right: 5px;\n"]);return ht=function(){return e},e}function dt(){var e=Object(d.a)(["\n  max-width: 100%;\n  max-height: 100%;\n  padding: 0 10px;\n  object-fit: contain;\n  object-position: 0 50%;\n"]);return dt=function(){return e},e}function ft(){var e=Object(d.a)(["\n  flex-wrap: nowrap;\n"]);return ft=function(){return e},e}function bt(){var e=Object(d.a)(["\n  margin: 10px 0;\n"]);return bt=function(){return e},e}var gt=v.a.div(bt()),kt=Object(v.a)(Ne.a)(ft()),jt=v.a.img(dt()),Ot=Object(v.a)(lt.a)(ht()),vt=Object(v.a)(mt.a)(pt()),yt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={anchorEl:null},n.onMenuClosed=n.onMenuClosed.bind(Object(w.a)(Object(w.a)(n))),n.onShowMenuClicked=n.onShowMenuClicked.bind(Object(w.a)(Object(w.a)(n))),n.onWeblioClicked=n.onWeblioClicked.bind(Object(w.a)(Object(w.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.words,a=t.word2urls,r=this.state.anchorEl,c=Boolean(r);return i.a.createElement(gt,null,i.a.createElement(ie.a,{container:!0,spacing:16},n.map(function(t){return i.a.createElement(ie.a,{key:t,item:!0,xs:!0},i.a.createElement(ce.a,{raised:!0},i.a.createElement(Ge.a,{avatar:i.a.createElement(Je.a,{"aria-label":"Word"},t[0]&&t[0].toUpperCase()),action:i.a.createElement("div",null,i.a.createElement(N.a,{onClick:e.onShowMenuClicked},i.a.createElement(ot.a,null)),i.a.createElement($e.a,null,i.a.createElement(Ye.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:e.onMenuClosed},i.a.createElement(tt.a,{onClick:function(){e.onWeblioClicked(t)}},i.a.createElement(at.a,null,i.a.createElement(Ot,null)),i.a.createElement(rt.a,{primary:"Weblio"})),i.a.createElement(tt.a,null,i.a.createElement(at.a,null,i.a.createElement(vt,null)),i.a.createElement(rt.a,{primary:"Delete (TODO)"}))))),title:t}),i.a.createElement(ue.a,null,i.a.createElement(kt,{cols:1.2},a[t].map(function(e){return i.a.createElement(Be.a,{key:e},i.a.createElement(jt,{src:e,alt:t}))})))))})))}},{key:"onMenuClosed",value:function(){this.setState({anchorEl:null})}},{key:"onShowMenuClicked",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"onWeblioClicked",value:function(e){window.open("https://ejje.weblio.jp/content/"+e),this.onMenuClosed()}}]),t}(a.Component);function Ct(){var e=Object(d.a)(["\n  margin: 10px;\n"]);return Ct=function(){return e},e}var Et=v.a.div(Ct()),Ut=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={zutanObjects:[],isZutanObjectsReady:!1},n.onClickHome=n.onClickHome.bind(Object(w.a)(Object(w.a)(n))),n.onClickMyZutan=n.onClickMyZutan.bind(Object(w.a)(Object(w.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.isMock?this.loadZutanMockObjects():this.loadZutanObjects()}},{key:"render",value:function(){if(!this.state.isZutanObjectsReady)return null;var e=[],t={};this.state.zutanObjects.forEach(function(n){t.hasOwnProperty(n.word)?t[n.word].push(n.imageURL):(t[n.word]=[n.imageURL],e.push(n.word))}),e.sort();var n,a=[],r=this.props.width;return n="xs"===r?1:3,e.forEach(function(e,t){t%n===0&&a.push([]),a[a.length-1].push(e)}),i.a.createElement("div",null,i.a.createElement(X,{onClickHome:this.onClickHome,onClickMyZutan:this.onClickMyZutan}),i.a.createElement(Et,null,a.map(function(e,n){return i.a.createElement(yt,{key:n,words:e,word2urls:t})})))}},{key:"loadZutanObjects",value:function(){var e=this,t=o.auth().currentUser;null!==t&&o.firestore().collection("users").doc(t.uid).collection("zutan").get().then(function(t){var n=[];t.forEach(function(e){var t=e.data();n.push({word:t.word,imageURL:t.imageURL})}),e.setState({zutanObjects:n,isZutanObjectsReady:!0})})}},{key:"loadZutanMockObjects",value:function(){this.setState({zutanObjects:Ce,isZutanObjectsReady:!0})}},{key:"onClickHome",value:function(){this.props.history.push("/")}},{key:"onClickMyZutan",value:function(){this.props.history.push("/myzutan")}}]),t}(a.Component),xt=ee()()(Ut);function It(){var e=Object(d.a)(["\n  width: 100%;\n  height: 100%;\n"]);return It=function(){return e},e}var Rt=v.a.div(It()),wt=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isSignedIn:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.isMock,t=!e&&!this.state.isSignedIn,n=Object(O.createGenerateClassName)(),a=Object(j.create)(Object(u.a)({},Object(O.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),r=i.a.createElement(f.a,null,i.a.createElement("div",null,i.a.createElement(b.a,{exact:!0,path:"/",render:function(t){var n=t.history;return i.a.createElement(Pe,{history:n,isMock:e})}}),i.a.createElement(b.a,{path:"/myzutan",render:function(t){var n=t.history;return i.a.createElement(xt,{history:n,isMock:e})}})));return i.a.createElement(k.a,{jss:a,generateClassName:n},i.a.createElement(Rt,null,t?i.a.createElement(U,null):r))}},{key:"componentDidMount",value:function(){this.addFirebaseAuthListener()}},{key:"addFirebaseAuthListener",value:function(){var e=this;o.auth().onAuthStateChanged(function(t){t?e.setState({isSignedIn:!0}):e.setState({isSignedIn:!1})})}}]),t}(a.Component),Mt={apiKey:"AIzaSyCr403V4WFUSNUp0oXOLxsJGpDxOl-DwrI",authDomain:"zu-tan.firebaseapp.com",projectId:"zu-tan"};n(358),o.initializeApp(Mt),o.firestore().settings({timestampsInSnapshots:!0});var St=!1;console.log("process.env.REACT_APP_MOCK: "+Object({NODE_ENV:"production",PUBLIC_URL:"/zutan"}).REACT_APP_MOCK),Object({NODE_ENV:"production",PUBLIC_URL:"/zutan"}).REACT_APP_MOCK&&(St=!0),c.a.render(i.a.createElement(wt,{isMock:St}),document.getElementById("root"))}},[[167,2,1]]]);
//# sourceMappingURL=main.dbcaad04.chunk.js.map